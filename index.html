<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>родрооро┐ро┤рпНроХрпН роХро│роЮрпНроЪро┐ропроорпН роЖро┤рпНроиро┐ро▓рпИроХрпН роХро▒рпНро▒ро▓рпН ро╡ро┐ройро╛роЯро┐тАУро╡ро┐ройро╛</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Noto Sans Tamil', sans-serif;
    margin: 0;
    background: #f5f7fb;
    color: #222;
    padding-bottom: 70px; 
  }
  .hidden { display: none !important; }
  
  /* Header Styles */
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(90deg, #007bff, #00b894);
    color: white;
    padding: 8px 15px;
    border-bottom: 4px solid #0a58ca;
  }
  .header h1 { margin: 0; font-size: 1.3rem; text-align: center; }
  .header p { margin: 2px 0 0; font-size: 0.85rem; text-align: center; }
  .header img { width: 50px; height: 50px; border-radius: 50%; object-fit: cover; border: 1px solid #fff; }

  /* Dashboard Styles */
  #dashboard-container {
    max-width: 1000px;
    margin: 10px auto;
    background: #fff;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
  }
  #dashboard-stats {
    display: flex;
    gap: 10px;
    margin-bottom: 15px;
    text-align: center;
    flex-wrap: wrap;
  }
  .stat-card {
    flex: 1;
    min-width: 150px;
    background: #f4f4f4;
    padding: 10px;
    border-radius: 8px;
  }
  .stat-card h4 { margin: 0 0 5px 0; color: #555; font-size: 0.85rem; }
  .stat-card p { margin: 0; font-size: 1.1rem; font-weight: 700; color: #007bff; }

  /* Quiz Area Styles */
  #tv-quiz-wrap {
    max-width: 1000px;
    margin: 10px auto;
    background: #fff;
    padding: 15px;
    display: grid;
    grid-template-columns: 1fr 240px;
    gap: 15px;
  }
  @media (max-width: 900px) { #tv-quiz-wrap { grid-template-columns: 1fr; } }

  /* ЁЯСС рокро╛рокрпН-роЕрокрпН (Modal) рокро╛рогро┐ ЁЯСС */
  .modal {
    display: none; 
    position: fixed; 
    z-index: 3000; 
    left: 0; top: 0;
    width: 100%; height: 100%;
    background-color: rgba(0,0,0,0.6); 
    backdrop-filter: blur(3px);
  }
  .modal-content {
    background-color: #fff;
    margin: 15% auto;
    padding: 25px;
    border-radius: 15px;
    width: 85%;
    max-width: 450px;
    text-align: center;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    animation: modalBounce 0.4s ease;
  }
  @keyframes modalBounce {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.05); opacity: 1; }
    100% { transform: scale(1); }
  }
  .modal-header { font-size: 1.6rem; margin-bottom: 12px; font-weight: bold; }
  .modal-body { font-size: 1.1rem; margin-bottom: 25px; line-height: 1.6; color: #333; }
  .modal-close-btn {
    background: linear-gradient(90deg, #007bff, #00b894);
    color: white; padding: 12px 30px;
    border: none; border-radius: 30px;
    cursor: pointer; font-weight: bold; font-size: 1rem;
  }

  /* Fixed Footer Styles */
  #fixed-footer-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: #fff;
    padding: 10px 0;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    z-index: 1000;
  }
  .quiz-nav {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    justify-content: space-around;
    padding: 0 15px;
  }
  #tv-prev, #tv-next {
    padding: 10px 20px;
    border-radius: 8px;
    border: none;
    font-weight: 700;
    color: #fff;
    cursor: pointer;
  }
  #tv-prev { background: #ff9800; }
  #tv-next { background: #007bff; }

  /* Misc Styles */
  #tv-side { font-size: 0.85rem; padding: 10px; background: #f5fcf8; border-radius: 10px; }
  #tv-question { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; }
  .option-btn {
    display: block; width: 100%; text-align: left; padding: 12px; margin-bottom: 8px;
    border: 1px solid #ddd; border-radius: 8px; background: #f9f9f9; cursor: pointer;
  }
  .option-btn.correct { background: #e6f7e9; border-color: #28a745; }
  .option-btn.wrong { background: #fdecea; border-color: #dc3545; }
</style>
</head>
<body>

  <div id="login-container">
    <h2>ЁЯСЛ ро╡рогроХрпНроХроорпН!ЁЯУЪ</h2>
    <input type="text" id="username-input" placeholder="роЙроЩрпНроХро│рпН рокрпЖропро░рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН">
    <button id="login-btn">роЙро│рпНроирпБро┤рпИ</button>
  </div>

  <main id="app-container" class="hidden">
    <div class="header">
      <img src="images/родро┐ро░рпБро╡ро│рпНро│рпБро╡ро░рпН.jpg" alt="родро┐ро░рпБро╡ро│рпНро│рпБро╡ро░рпН">
      <div>
        <h1>родрооро┐ро┤рпНроХрпН роХро│роЮрпНроЪро┐ропроорпН роЖро┤рпНроиро┐ро▓рпИроХрпН роХро▒рпНро▒ро▓рпН ро╡ро┐ройро╛роЯро┐тАУро╡ро┐ройро╛</h1>
        <p>ЁЯУЪ родрпЗро░рпНроирпНродрпЖроЯрпБродрпНродрпБ роЙроЩрпНроХро│рпН роЕро▒ро┐ро╡рпИроЪрпН роЪрпЛродро┐роХрпНроХро▓ро╛роорпН ЁЯУЪ</p>
      </div>
      <img src="images/родрпКро▓рпНроХро╛рокрпНрокро┐ропро░рпН.jpg" alt="родрпКро▓рпНроХро╛рокрпНрокро┐ропро░рпН">
    </div>

    <div id="dashboard-container">
      <div id="dashboard-stats">
        <div class="stat-card">
          <h4>роорпКродрпНрод ро╡ро┐ройро╛роЯро┐тАУро╡ро┐ройро╛ родрпКроХрпБрокрпНрокрпБроХро│рпН</h4>
          <p id="total-quiz-count">роХрогроХрпНроХро┐роЯрокрпНрокроЯрпБроХро┐ро▒родрпБ...</p>
        </div>
        <div class="stat-card">
          <h4>роХроЯрпИроЪро┐ропро╛роХрокрпН рокрпБродрпБрокрпНрокро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ</h4>
          <p id="last-updated-time">---</p>
        </div>
        <div class="stat-card">
          <h4>роОройрпН роорпКродрпНрод роорпБропро▒рпНроЪро┐роХро│рпН</h4>
          <p id="stat-total-attempts">0</p>
        </div>
      </div>
      
      <div id="dashboard-leaderboard">
        <h3 style="text-align: center; font-size: 1rem; color: #007bff;">ЁЯСе рокроЩрпНроХрпЗро▒рпНрокро╛ро│ро░рпНроХро│ро┐ройрпН рокрпБро│рпНро│ро┐ро╡ро┐ро╡ро░роорпН</h3>
        <table id="leaderboard-table" style="width:100%; font-size: 0.85rem; border-collapse: collapse;">
          <thead><tr style="background:#f2f2f2;"><th>рокрпЖропро░рпН</th><th>роорпБропро▒рпНроЪро┐роХро│рпН</th></tr></thead>
          <tbody id="leaderboard-table-body"></tbody>
        </table>
      </div>
    </div>

    <div id="tv-quiz-wrap">
      <div id="tv-main">
        <select id="quizSelect"><option value="" disabled selected>ЁЯза родрпКроХрпБрокрпНрокрпИродрпН родрпЖро░ро┐ро╡рпБроЪрпЖропрпНроХ</option></select>
        <div id="tv-progress"></div>
        <div id="tv-question"></div>
        <div id="tv-options"></div>
        <div id="tv-feedback" style="display:none; margin-top:10px; padding:10px; background:#f9f9f9; border-radius:8px;"></div>
        <div id="tv-results" class="hidden">
            <h2 id="tv-result-title">ЁЯОЙ ро╡ро╛ро┤рпНродрпНродрпБроХрпНроХро│рпН!</h2>
            <p id="tv-result-score"></p>
            <button id="tv-restart-btn">роорпАрогрпНроЯрпБроорпН родрпКроЯроЩрпНроХ ЁЯФБ</button>
        </div>
      </div>
      
      <div id="tv-side">
        <div id="tv-participants-box">
          <h4>ЁЯСд рокроЩрпНроХрпЗро▒рпНрокро╛ро│ро░рпНроХро│рпН: <span id="tv-total-participants">0</span></h4>
        </div>
        <div id="tv-timer-box" style="display:none;">
          <h4>тП░ роирпЗро░роорпН: <span id="tv-timer-display">00:00</span></h4>
        </div>
        <h2>ЁЯСитАНЁЯТ╗ роЙро░рпБро╡ро╛роХрпНроХрпБроиро░рпН</h2>
        <p>роорпБройрпИро╡ро░рпН роЪродрпНродро┐ропро░ро╛роЪрпБ родроЩрпНроХроЪрпНроЪро╛рооро┐</p>
      </div>
    </div>

    <div id="quiz-modal" class="modal">
      <div class="modal-content">
        <div id="modal-header" class="modal-header"></div>
        <div id="modal-body" class="modal-body"></div>
        <button class="modal-close-btn" onclick="closeModal()">роЪро░ро┐, роЕроЯрпБродрпНродрпБ роЪрпЖро▓рпНроХ</button>
      </div>
    </div>

    <div id="fixed-footer-nav" class="hidden">
      <div class="quiz-nav">
        <button id="tv-prev">ЁЯСИ роорпБроирпНродрпИроп</button>
        <button id="tv-next">роЕроЯрпБродрпНрод ЁЯСЙ</button>
      </div>
    </div>
  </main>

  <script>
    async function updateQuizStats() {
      try {
        const res = await fetch("quiz-list.json", { cache: "no-cache" });
        const list = await res.json();
        let count = 0;
        list.forEach(cat => count += cat.quizzes.length);
        document.getElementById('total-quiz-count').textContent = count;
        const now = new Date();
        const options = { day: 'numeric', month: 'long', year: 'numeric', hour: '2-digit', minute: '2-digit' };
        document.getElementById('last-updated-time').textContent = now.toLocaleDateString('ta-IN', options);
      } catch (e) { console.error(e); }
    }

    function closeModal() { document.getElementById('quiz-modal').style.display = 'none'; }

    document.addEventListener('DOMContentLoaded', () => {
      updateQuizStats();
      // Login/Dashboard logic remains same as per your index(3).html
    });
  </script>
  <script src="js/quiz-loader.js"></script>
</body>
</html>
